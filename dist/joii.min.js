"use strict";!function(e){"function"==typeof define&&define.amd?define("JOII",[],e):e("object"==typeof exports?exports:window)}(function(e){var t={};t.Compat={},t.Compat.findJOIIName=function(e){var i,n;if("string"==typeof e||"number"==typeof e||"undefined"==typeof e||null===e)return!1;if("undefined"!=typeof e.__joii__)return e.__joii__.name;if("undefined"!=typeof e.prototype&&"undefined"!=typeof e.prototype.__joii__)return e.prototype.__joii__.name;if("undefined"!=typeof e.__proto__&&(n=t.Compat.findJOIIName(e.__proto__),"string"==typeof n))return n;"function"==typeof e&&(e=e.prototype);for(i in e)if(e.hasOwnProperty(i)!==!1&&("function"==typeof e[i]||"object"==typeof e[i])&&(n=t.Compat.findJOIIName(e[i]),"string"==typeof n))return n;return!1},t.Compat.indexOf=function(e,t){if("function"==typeof e.indexOf)return e.indexOf(t);var i=e.length>>>0,n=Number(arguments[1])||0;for(n=0>n?Math.ceil(n):Math.floor(n),n=0>n?n+i:n;i>n;n++)if(n in e&&e[n]===t)return n;return-1},t.Compat.extend=function(){var e,i,n,r,a=!1,o=arguments[0]||{},s=1,f=arguments.length,p=!1;for("boolean"==typeof o&&(p=o,o=arguments[s]||{},s++),"object"!=typeof o&&"function"!=typeof o&&(o={});f>s;s++)if(null!==(e=arguments[s])&&void 0!==arguments[s]){"undefined"!=typeof e.__joii__&&t.CreateProperty(o,"__joii__",e.__joii__);for(var _ in e)i=o[_],n=e[_],o!==n&&(p&&n&&(t.Compat.isPlainObject(n)||(a=t.Compat.isArray(n)))?(a?(a=!1,r=i&&t.Compat.isArray(i)?i:[]):r=i&&t.Compat.isPlainObject(i)?i:{},o[_]=t.Compat.extend(p,r,n)):void 0!==n&&(o[_]=n))}return o},t.Compat.isArray=function(e){var t=e.length,i=typeof e;return"function"===i||"undefined"!=typeof window&&e===window?!1:1===e.nodeType&&t?!0:"[object Array]"===Object.prototype.toString.call(e)},t.Compat.isPlainObject=function(e){var t={}.hasOwnProperty;return"object"!=typeof e||e.nodeType||"undefined"!=typeof window&&e===window?!1:!(e.constructor&&!t.call(e.constructor.prototype,"isPrototypeOf"))},t.Compat.CreateObject=function(e){if("function"==typeof Object.create)return Object.create(e);var t=function(){function e(){}return function(t){if(1!=arguments.length)throw new Error("JOII.Compat.CreateObject implementation only accepts one parameter.");return e.prototype=t,new e}}();return t(e)},t.Compat.Bind=function(e,t){if("function"!=typeof e)throw new TypeError("Function.prototype.bind - argument #1 must be a function.");return function(){return e.apply(t,arguments)}},t.Compat.GenerateUUID=function(){for(var e=[],t="0123456789abcdef",i=0;36>i;i++)e[i]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},t.Compat.ParseArguments=function(e){var i={name:"",parameters:{},body:{}};switch(e.length){case 0:i.name=t.Compat.GenerateUUID();break;case 1:"string"==typeof e[0]&&(i.name=e[0]),"object"==typeof e[0]&&(i.name=t.Compat.GenerateUUID(),i.body=e[0]);break;case 2:"string"==typeof e[0]&&(i.name=e[0]),"object"==typeof e[0]&&(i.name=t.Compat.GenerateUUID(),i.parameters=e[0]),i.body=e[1];break;case 3:i.name=e[0],i.parameters=e[1],i.body=e[2]}if("string"!=typeof i.name||"object"!=typeof i.parameters||"object"!=typeof i.body)throw"Invalid parameter types given. Expected: ([[[string], object], <object>]).";return i},t.Compat.flexibleArgumentToArray=function(e,i){if("object"!=typeof e||t.Compat.isArray(e)||"undefined"!=typeof e[0]){if("function"==typeof e)return[i?t.Compat.extend(!0,{},e.prototype):e.prototype];if("object"==typeof e&&t.Compat.isArray(e)){var n=[];for(var r in e)n.push(t.Compat.flexibleArgumentToArray(e[r],!1)[0]);return n}throw"Unable to read "+typeof e+". Object, function or array expected."}return[i?t.Compat.extend(!0,{},e):e]},t.Config={constructors:["__construct","construct","->","=>"],callables:["__call","<>"],addConstructor:function(e){-1===t.Config.constructors.indexOf(e)&&t.Config.constructors.push(e)},addCallable:function(e){-1===t.Config.callables.indexOf(e)&&t.Config.callables.push(e)}},t.InternalPropertyNames=["__joii__","super","instanceOf","deserialize","serialize"],t.InternalTypeNames=["undefined","object","boolean","number","string","symbol","function","const"],t.PrototypeBuilder=function(e,i,n,r){var a={},o=t.Compat.extend(!0,{},n);if(t.CreateProperty(a,"__joii__",{name:e,parent:void 0,metadata:{},constants:{},implementations:[e],is_abstract:i["abstract"]===!0,is_final:i["final"]===!0}),"undefined"!=typeof i.uses){var s=t.Compat.flexibleArgumentToArray(i.uses);for(var f in s)o=t.Compat.extend(!0,o,s[f])}if(a.__joii__.is_abstract&&a.__joii__.is_final)throw"A class cannot be both abstract and final simultaniously.";for(var p in o)if(o.hasOwnProperty(p)!==!1){var _=t.ParseClassProperty(p);_.is_constant?(a.__joii__.constants[_.name]=o[p],t.CreateProperty(a,_.name,o[p],!1)):a[_.name]=o[p],a.__joii__.metadata[_.name]=_}if("undefined"!=typeof i["abstract"]&&(a.__joii__.is_abstract=!0,r))throw"An interface cannot be declared abstract.";if("undefined"!=typeof i["extends"]){var c=i["extends"];if("function"==typeof c&&(c=c.prototype),"object"!=typeof c)throw(r?"An interface":"A class")+" may only extend on functions or object-types.";if(a.__joii__.parent=t.Compat.extend(!0,{},c),c.__joii__.is_final===!0)throw"Unable to extend on a final class.";for(var u=a.__joii__.parent;"undefined"!=typeof u;)a.__joii__.implementations.push(u.__joii__.name),u=u.__joii__.parent;a.__joii__.constants=t.Compat.extend(!0,a.__joii__.constants,c.__joii__.constants),t.CreateProperty(a.__joii__.parent,"__joii__",c.__joii__);for(p in a.__joii__.parent)if(a.__joii__.parent.hasOwnProperty(p)&&-1===t.Compat.indexOf(t.InternalPropertyNames,p)){var l=a.__joii__.parent[p],m=a.__joii__.parent.__joii__.metadata[p],y=a.__joii__.metadata[p];if("undefined"==typeof y&&(y=a.__joii__.metadata[p]=m),"undefined"==typeof a[p]||"object"!=typeof m||"object"!=typeof y)if("function"==typeof l&&r!==!0)a[p]=Function('                var args = ["'+p+"\"];                for (var i in arguments) { args.push(arguments[i]); }                return this['super'].apply(this, args);            ");else{a[p]=l;var d=t.CreatePropertyGetterSetter(a,m);"undefined"==typeof a[d.getter.name]&&"undefined"!=typeof d.getter.meta&&(d.getter.meta.is_generated=!0,a[d.getter.name]=d.getter.fn,a.__joii__.metadata[d.getter.name]=d.getter.meta),"undefined"==typeof a[d.setter.name]&&"undefined"!=typeof d.setter.meta&&(d.setter.meta.is_generated=!0,a[d.setter.name]=d.setter.fn,a.__joii__.metadata[d.setter.name]=d.setter.meta)}else if(y.is_generated===!1){if(m.visibility!==y.visibility)throw'Member "'+p+'" must be '+m.visibility+" as defined in the parent "+(r?"interface":"class")+".";if(m.is_final===!0)throw'Final member "'+p+'" cannot be overwritten.';if(m.is_read_only!==y.is_read_only)throw'Member "'+p+'" must be read-only as defined in the parent '+(r?"interface":"class")+".";if(m.is_nullable!==y.is_nullable)throw'Member "'+p+'" must be nullable as defined in the parent '+(r?"interface":"class")+"."}}}for(p in o)o.hasOwnProperty(p)!==!1&&(_=t.ParseClassProperty(p),"function"!=typeof a[_.name]&&"private"!==_.visibility&&(d=t.CreatePropertyGetterSetter(o,_),a[d.getter.name]=d.getter.fn,a.__joii__.metadata[d.getter.name]=d.getter.meta,a[d.setter.name]=d.setter.fn,a.__joii__.metadata[d.setter.name]=d.setter.meta));return r!==!0&&(a["super"]=function(e){var t=Array.prototype.slice.call(arguments,1),i=this,n=this.__joii__,r=function(e,t,a){if("undefined"==typeof e)throw new Error('Parent method "'+t+'" does not exist.');if("undefined"!=typeof e.__joii__.parent&&"undefined"==typeof e.__joii__.parent[t])return r(e.__joii__.parent,t,a);var o=e.__joii__.parent;if("undefined"==typeof e.__joii__.parent){if("undefined"==typeof e.__api__.__joii__.parent)throw new Error('Method "'+t+"\" does not exist in the parent class. (called using 'super()')");o=e.__api__.__joii__.parent}var s=o[t];i.__joii__=o.__joii__;var f=s.apply(i,a);return i.__joii__=n,f};return r(this,e,t)},a.instanceOf=function(e){"function"==typeof e?e=e.prototype.__joii__.name:"object"==typeof e&&(e=e.__joii__.name);var i=this.__joii__.getInterfaces();for(var n in i)if(i.hasOwnProperty(n)!==!1){if(i[n].prototype.__joii__.name===e)return!0;if(-1!==t.Compat.indexOf(i[n].prototype.__joii__.implementations,e))return!0}if(this.__joii__.name!==e){if("undefined"!=typeof this.__joii__.parent){var r=this,a=this.__joii__.parent;t.Compat.Bind(a.instanceOf,a);var o=a.instanceOf(e);return t.Compat.Bind(a.instanceOf,r),o}return!1}return!0}),a},t.ParseClassProperty=function(e){var i,n=e.toString().replace(/^\s+|\s+(?=\s)|\s+$/g,"").split(/\s/),r=n[n.length-1],a=t.InternalTypeNames,o=!1,s={name:r,type:null,visibility:"public",is_abstract:!1,is_final:!1,is_nullable:!1,is_read_only:!1,is_constant:!1,is_enum:!1,is_generated:!1,is_joii_object:!1,serializable:!1};if(n.pop(),0===n.length)return s;for(i in n)"undefined"==typeof t.InterfaceRegistry[n[i]]&&"undefined"==typeof t.ClassRegistry[n[i]]&&(n[i]=n[i].toString().toLowerCase());var f=function(e,i,n){"object"!=typeof e&&(e=[e]);for(var r in e)if(e.hasOwnProperty(r)!==!1&&-1!==t.Compat.indexOf(i,e[r]))throw n};for(i in n)switch(n[i]){case"public":f("protected",n,'Property "'+r+'" cannot be both public and protected at the same time.'),f("private",n,'Property "'+r+'" cannot be both public and private at the same time.'),s.visibility="public",o||(s.serializable=!0);break;case"protected":f("public",n,'Property "'+r+'" cannot be both protected and public at the same time.'),f("private",n,'Property "'+r+'" cannot be both protected and private at the same time.'),s.visibility="protected";break;case"private":f("public",n,'Property "'+r+'" cannot be both private and public at the same time.'),f("protected",n,'Property "'+r+'" cannot be both private and protected at the same time.'),s.visibility="private";break;case"abstract":f("final",n,'Property "'+r+'" cannot be both abstract and final at the same time.'),s.is_abstract=!0;break;case"final":f("abstract",n,'Property "'+r+'" cannot be both abstract and final at the same time.'),s.is_final=!0;break;case"nullable":s.is_nullable=!0;break;case"read":case"immutable":s.is_read_only=!0;break;case"serializable":s.serializable=!0,o=!0;break;case"notserializable":s.serializable=!1,o=!0;break;case"const":f(["private","protected","public"],n,"A constant cannot have visibility modifiers."),f("final",n,"A constant cannot be final."),f("abstract",n,"A constant cannot be abstract."),f(["nullable","immutable","read"],n,"A constant cannot be nullable or immutable."),s.is_constant=!0;break;default:if(-1!==t.Compat.indexOf(a,n[i])){if(null!==s.type)throw'Property "'+r+'" has multiple type defintions.';s.type=n[i];break}if("undefined"!=typeof t.InterfaceRegistry[n[i]]){s.is_joii_object=!0,s.type=t.InterfaceRegistry[n[i]].definition.__interface__.name;break}if("undefined"!=typeof t.ClassRegistry[n[i]]){s.is_joii_object=!0,s.type=t.ClassRegistry[n[i]].prototype.__joii__.name;break}if("undefined"!=typeof t.EnumRegistry[n[i]]){s.is_enum=!0,s.type=n[i];break}throw'Syntax error: unexpected "'+n[i]+'" in property declaration of "'+r+'".'}return s},t.CreatePropertyGetterSetter=function(e,i){var n,r,a;"boolean"===i.type?"Is"===t.CamelcaseName(i.name).substr(0,2)?(n=t.CamelcaseName(i.name),n=n.substring(0,1).toLowerCase()+n.substring(1)):n="is"+t.CamelcaseName(i.name):n="get"+t.CamelcaseName(i.name);var o,s,f="set"+t.CamelcaseName(i.name);if("undefined"==typeof e[n]&&(a=new Function('return this["'+i.name+'"];'),r=t.ParseClassProperty(i.visibility+" function "+n),r.visibility=i.visibility,r.is_abstract=i.is_abstract,r.is_final=i.is_final),"undefined"==typeof e[f]&&i.is_read_only===!1){var p,_=i.is_nullable;p="undefined"!=typeof t.InterfaceRegistry[i.type]||"undefined"!=typeof t.ClassRegistry[i.type]?"                        if (JOII.Compat.findJOIIName(v) === '"+i.type+"') {} else {\n                        if (v !== null && typeof(v.instanceOf) !== 'function' || (typeof(v) === 'object' && v !== null && typeof(v.instanceOf) === 'function' && !v.instanceOf('"+i.type+"')) || v === null) {\n                            if ("+_+" === false || ("+_+' === true && v !== null && typeof(v) !== "undefined")) {\n                                throw "'+f+" expects an instance of "+i.type+', " + (v === null ? "null" : typeof(v)) + " given.";\n                            }\n                        }};':"                        if (typeof(JOII.EnumRegistry['"+i.type+"']) !== 'undefined') {                            var _e = JOII.EnumRegistry['"+i.type+"'];                            if (!_e.contains(v)) {                                throw \""+f+': \'" + v + "\' is not a member of enum " + _e.getName() + ".";                            }                        } else {                            if (typeof(v) !== \''+i.type+"') {                                if ("+_+" === false || ("+_+' === true && v !== null && typeof(v) !== "undefined")) {                                    throw "'+f+" expects "+i.type+', " + typeof(v) + " given.";                                }                            };                        }',s=new Function("v",(null!==i.type?p:"")+'this["'+i.name+'"] = v; return this.__api__;'),o=t.ParseClassProperty(i.visibility+" function "+f),o.visibility=i.visibility,o.is_abstract=i.is_abstract,o.is_final=i.is_final}return{getter:{name:n,fn:a,meta:r},setter:{name:f,fn:s,meta:o}}},t.CreateProperty=function(e,t,i,n){try{"undefined"!=typeof Object.defineProperty?Object.defineProperty(e,t,{value:i,enumerable:n===!1,configurable:n!==!1,writable:n!==!1}):e[t]=i}catch(r){e[t]=i}},t.CamelcaseName=function(e){return e=e.toLowerCase().replace(/_(.)/g,function(e,t){return t.toUpperCase()}),e.charAt(0).toUpperCase()+e.slice(1)},t.ClassRegistry={},t.ClassBuilder=function(){function e(){var e=function(){};e.prototype=this;var i=new e,n={};if(i=t.Compat.extend(!0,{},i),"undefined"!=typeof this&&(t.CreateProperty(i,"__joii__",this.__joii__),t.CreateProperty(n,"__joii__",this.__joii__)),"undefined"!=typeof this&&"object"==typeof this.__joii__){if(this.__joii__.is_abstract===!0)throw"An abstract class cannot be instantiated.";for(var r in this){var o=this.__joii__.metadata[r];if(o&&o.is_abstract===!0)throw'Missing abstract member implementation of "'+r+'".';"function"!=typeof this[r]||"undefined"!=typeof o&&"public"!==o.visibility||"__call"===r||(n[r]=t.Compat.Bind(i[r],i))}}if("undefined"==typeof this||"undefined"==typeof this.__joii__){for(var s in t.Config.callables)if(t.Config.callables.hasOwnProperty(s)&&"function"==typeof a[t.Config.callables[s]]){var f=a[t.Config.callables[s]].apply(a,arguments);if(f===a)throw t.Config.callables[s]+" cannot return itself.";return f}throw"This class cannot be called as a function because it's lacking the __call method."}if(i.__api__=n,"undefined"!=typeof i.__joii__.parent)for(var p=i.__joii__.parent;"undefined"!=typeof p;)p.__api__=n,p=p.__joii__.parent;for(var s in t.Config.constructors)if(t.Config.constructors.hasOwnProperty(s)){var _=t.Config.constructors[s];if("function"==typeof i[_]){i[_].apply(i,arguments);break}}if(1==arguments.length&&"object"==typeof arguments[0]&&"__joii_deserialize_object"in arguments[0]&&i.deserialize(arguments[0].data),this.__joii__.is_abstract)throw"Cannot instantiate abstract class "+this.__joii__.name;return n}var i=t.Compat.ParseArguments(arguments),n=i.name,r=i.parameters,a=i.body;e.prototype=t.PrototypeBuilder(n,r,a,!1);for(var o in e.prototype.__joii__.constants)t.CreateProperty(e,o,e.prototype.__joii__.constants[o],!1);if("string"==typeof r["enum"]){var s=t.EnumBuilder(r["enum"],e);if(r.expose_enum===!0){var f="object"==typeof window?window:global;if("undefined"!=typeof f[r["enum"]])throw'Cannot expose Enum "'+r["enum"]+'" becase it already exists in the global scope.';f[r["enum"]]=s}}var p=arguments[0];if(e.toString=function(){return"string"==typeof p?"[class "+p+"]":"[class Class]"},e.prototype.__joii__.interfaces=r["implements"],e.prototype.__joii__.getInterfaces=t.Compat.Bind(function(){var e=[],i=t.Compat.Bind(function(e){if("function"==typeof e)return e;if("string"==typeof e){if("undefined"==typeof t.InterfaceRegistry[e])throw'Interface "'+e+'" does not exist.';return t.InterfaceRegistry[e]}},this);if("undefined"!=typeof this.parent&&"undefined"!=typeof this.parent.__joii__&&(e=this.parent.__joii__.getInterfaces()),"undefined"!=typeof this.interfaces)if("object"==typeof this.interfaces)for(var n in this.interfaces)this.interfaces.hasOwnProperty(n)&&e.push(i(this.interfaces[n]));else e.push(i(this.interfaces));return e},e.prototype.__joii__),r["abstract"]!==!0){var _=e.prototype.__joii__.getInterfaces();for(var c in _)_.hasOwnProperty(c)&&"function"==typeof _[c]&&_[c](e)}if("undefined"==typeof e.prototype.serialize&&(e.prototype.serialize=function(){var e={__joii_type:this.__joii__.name};for(var t in this.__joii__.metadata){var i=this.__joii__.metadata[t];i.serializable&&(i.is_joii_object&&!i.is_enum&&"object"==typeof this[i.name]&&null!=this[i.name]?e[i.name]=JSON.parse(this[i.name].serialize()):e[i.name]=this[i.name])}return JSON.stringify(e)}),"undefined"==typeof e.prototype.deserialize&&(e.prototype.deserialize=function(e){var i=e;"string"==typeof e&&(i=JSON.parse(e));for(var n in this.__joii__.metadata){var r=this.__joii__.metadata[n];if(r.serializable&&r.name in i&&"function"!=typeof i[r.name])if("object"==typeof i[r.name]&&null!=i[r.name]&&"__joii_type"in i[r.name]){var a=i[r.name].__joii_type;if("undefined"!=typeof t.InterfaceRegistry[a])throw"Cannot instantiate an interface.";if("undefined"==typeof t.ClassRegistry[a])throw"Class "+a+" not currently in scope!";this[r.name]=t.ClassRegistry[a].deserialize(i[r.name])}else this[r.name]=i[r.name]}}),e.deserialize=function(t){var i={__joii_deserialize_object:!0,data:t};return new e(i)},"undefined"!=typeof t.ClassRegistry[n])throw'Another class named "'+n+'" already exists.';return t.ClassRegistry[n]=e,e.prototype=t.Compat.extend(!0,{},e.prototype),e},t.InterfaceRegistry={},t.InterfaceBuilder=function(){var e=t.Compat.ParseArguments(arguments),i=e.name,n=e.parameters,r=e.body,a=t.PrototypeBuilder(i,n,r,!0),o=function(e){var i,n,r,a=new t.Reflection.Class(e),o=this.reflector.getProperties(),s=this.reflector.getMethods();if(a.isAbstract())return!0;var f=function(e,t,i,n){if(t.getVisibility()!==i.getVisibility())throw n+" "+i.getName()+" cannot be "+i.getVisibility()+" because the interface declared it "+t.getVisibility()+".";if(t.getType()!==i.getType())throw n+" "+i.getName()+" cannot be declared as "+i.getType()+" because the interface declared it as "+t.getType()+".";if(t.isNullable()!==i.isNullable())throw n+" "+i.getName()+" must be nullable as defined in the interface "+e.name+".";return!0};for(i in o)if(o.hasOwnProperty(i)!==!1){if(n=o[i],!a.hasProperty(n.getName()))throw"Class must implement "+n.toString().split(":")[0]+" as defined in the interface "+this.name+".";r=a.getProperty(n.getName()),f(this,n,r,"Property")}for(i in s)if(s.hasOwnProperty(i)!==!1){if(n=s[i],!a.hasMethod(n.getName()))throw"Class must implement "+n.toString().split(":")[0]+" as defined in the interface "+this.name+".";if(r=a.getMethod(n.getName()),f(this,n,r,"Method"),n.getParameters().length!==r.getParameters().length)throw"Method "+n.getName()+" does not match the parameter count as defined in the interface "+this.name+"."}};t.CreateProperty(o,"__interface__",{prototype:a,reflector:new t.Reflection.Class(a),name:i}),t.CreateProperty(o,"__joii__",a.__joii__);var s=t.Compat.Bind(o,o.__interface__);s.prototype=a;var f,p=o.__interface__.reflector.getProperties(),_=o.__interface__.reflector.getMethods(),c=function(e,t){if(e.isAbstract())throw"An interface may not contain abstract definitions. "+t+" "+e.getName()+" is abstract in interface "+o.__interface__.name+".";if(e.isFinal())throw"An interface may not contain final definitions. "+t+" "+e.getName()+" is final in interface "+o.__interface__.name+"."};for(f in p)p.hasOwnProperty(f)!==!1&&c(p[f],"Property");for(f in _)_.hasOwnProperty(f)!==!1&&c(_[f],"Method");if(t.CreateProperty(s,"definition",o),"undefined"!=typeof t.InterfaceRegistry[i])throw'Another interface with the name "'+i+'" already exists.';if(-1!==t.Compat.indexOf(t.InternalTypeNames,i))throw'An interface may not be named "'+i+'", becase that name is reserved.';var u={};for(f in a.__joii__.constants)a.__joii__.constants.hasOwnProperty(f)!==!1&&(t.CreateProperty(s,f,a.__joii__.constants[f],!1),u[f]=a.__joii__.constants[f]);if("string"==typeof n["enum"]){var l=t.EnumBuilder(n["enum"],u);if(n.expose_enum===!0){var m="object"==typeof window?window:global;if("undefined"!=typeof m[n["enum"]])throw'Cannot expose Enum "'+n["enum"]+'" becase it already exists in the global scope.';m[n["enum"]]=l}}return t.InterfaceRegistry[i]=s,s},t.EnumRegistry={},t.EnumBuilder=t.ClassBuilder({"final":!0},{"public immutable string name":null,"public immutable object constants":{},__construct:function(e,t){this.name=e,this.constants=t},contains:function(e){for(var t in this.constants)if(this.constants.hasOwnProperty(t)!==!1&&this.constants[t]===e)return!0;return!1},__call:function(e,i){if("string"!=typeof e)throw"Argument #1 of Enum must be a string, "+typeof e+" given.";if("function"==typeof i&&"undefined"!=typeof i.prototype.__joii__&&(i=i.prototype.__joii__.constants),"object"!=typeof i)throw"Argument #2 of Enum must be an object or definition, "+typeof i+" given.";if("undefined"!=typeof t.EnumRegistry[e.toLowerCase()])throw'Enumerator "'+e+'" already exists.';var n=new t.EnumBuilder(e,i);for(var r in i){if("function"==typeof i[r])throw'An enumerator cannot contain functions. "'+r+'" is a function.';if("object"==typeof i[r])throw'An enumerator cannot contain objects. "'+r+'" is an object.';t.CreateProperty(n,r,i[r],!1)}return t.EnumRegistry[e.toLowerCase()]=n,n}}),t="undefined"!=typeof t?t:{},t.Reflection={},t.Reflection.Class=t.ClassBuilder({},{"protected immutable object meta":null,"protected immutable object proto":null,"public immutable object parent":null,"protected __construct":function(e){if("function"==typeof e&&(e=e.prototype),"object"!=typeof e||"object"!=typeof e.__joii__)throw"Reflection.Class requires a JOII-created definition.";this.proto=e,this.meta=e.__joii__,"undefined"!=typeof this.meta.parent&&(this.parent=new t.Reflection.Class(this.meta.parent))},"public getName":function(){return this.meta.name},"public isAbstract":function(){return this.meta.is_abstract===!0},"public hasProperty":function(e){var t=this.getProperties();for(var i in t)if(t[i].getName()===e)return!0;return!1},"public hasParent":function(){return null!==this.parent},"public getParent":function(){return this.parent},"public getMethods":function(e){var i=[];for(var n in this.proto)"function"==typeof this.proto[n]&&-1===t.Compat.indexOf(t.InternalPropertyNames,n)&&i.push(new t.Reflection.Method(this,n));return i},"public hasMethod":function(e){var t=this.getMethods();for(var i in t)if(t[i].getName()===e)return!0;return!1},"public getMethod":function(e){var t=this.getMethods();for(var i in t)if(t[i].getName()===e)return t[i];throw'Method "'+e+'" does not exist.'},"public getProperties":function(e){var i=[];for(var n in this.proto)"function"!=typeof this.proto[n]&&-1===t.Compat.indexOf(t.InternalPropertyNames,n)&&i.push(new t.Reflection.Property(this,n));return i},"public getProperty":function(e){var t=this.getProperties();for(var i in t)if(t[i].getName()===e)return t[i];throw'Property "'+e+'" does not exist.'}}),t.Reflection.Property=t.ClassBuilder({},{"protected nullable object reflector":null,"protected nullable object meta":null,"public read string name":null,"protected __construct":function(e,t){this.reflector=e,this.name=t,this.meta=e.getMeta().metadata[t],"undefined"==typeof this.meta&&(this.meta={name:this.name,type:null,visibility:"public",is_nullable:!1,is_abstract:!1,is_read_only:!1,is_final:!1}),null===this.meta.type&&this.meta.is_nullable===!1&&(this.meta.type=typeof this.reflector.getProto()[this.meta.name])},"public getType":function(){return this.meta.type},"public isAbstract":function(){return this.meta.is_abstract},"public isNullable":function(){return this.meta.is_nullable},"public isFinal":function(){return this.meta.is_final},"public isPrivate":function(){return"private"===this.meta.visibility},"public isProtected":function(){return"protected"===this.meta.visibility},"public isPublic":function(){return"public"===this.meta.visibility},"public isImmutable":function(){return this.meta.is_read_only},"public isConstant":function(){return this.meta.is_constant},"public isType":function(e){return e===this.meta.type},"public getVisibility":function(){return this.meta.visibility},toString:function(){var e=[],t=this.reflector.getProto()[this.name],i="",n="";return this.meta.is_abstract&&e.push("abstract"),this.meta.is_final&&e.push("final"),e.push(this.meta.visibility),this.meta.is_nullable&&e.push("nullable"),this.meta.is_read_only&&e.push("read"),null===this.meta.type?null===t?e.push("mixed"):e.push(typeof t):e.push(this.meta.type),e.push('"'+this.meta.name+'"'),i=e.join(" "),n="function"==typeof t?"[Function]":"object"==typeof t&&null!==t?"[Object ("+t.length+")]":"string"==typeof t?'"'+t+'"':t,i+": "+n}}),t.Reflection.Method=t.ClassBuilder({"extends":t.Reflection.Property},{"public getParameters":function(){var e=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,t=/,/,i=/^\s*(_?)(\S+?)\1\s*$/,n=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,r=function(r){var a,o,s=[];a=r.toString().replace(n,""),o=a.match(e);var f=o[1].split(t),p=function(e,t,i){s.push(i)};for(var _ in f){var c=f[_];c.replace(i,p)}return s};return r(this.reflector.getProto()[this.name])},"public getBodyAsString":function(e){var t=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,i=this.reflector.getProto()[this.name].toString().replace(t,"");return i.substr(i.indexOf("{")+1,i.lastIndexOf("}")-4).replace(/}([^}]*)$/,"$1")},"public usesVariadicArguments":function(){var e=this.reflector.getProto()[this.name].toString();return e.match(/[\(|\.|\ ](arguments)[\)|\.|\,|\ |]/g)},toString:function(){var e=this["super"]("toString").split(":")[0],t="[Function",i=this.getParameters(),n=this.usesVariadicArguments();return i.length>0?(t+=" ("+i.join(", "),n&&(t+=", ..."),t+=")"):0===i.length&&n&&(t+=" (...)"),t+="]",e+": "+t}}),e.JOII=t,e.Class=t.ClassBuilder,e.Interface=t.InterfaceBuilder,e.Enum=t.EnumBuilder,e.useGlobal=function(){var t="object"==typeof window?window:global;for(var i in e)e.hasOwnProperty(i)!==!1&&(t[i]=e[i])}});