/**
 * (JOII) Javascript Object Inheritance Implementation
 *
 * @author Harold Iedema <harold@iedema.me>
 */
function Class(e,t){if(t===undefined&&(typeof e==="function"||typeof e==="object")){t=e;e={}}var n=function(){var n=function(){};if(typeof e["extends"]==="string"){var r=e["extends"];e["extends"]=__joii__.aliases[r];if(typeof e["extends"]==="undefined"){throw'Alias "'+r+'" does not exist.'}}if(typeof e["extends"]==="function"){if(e["extends"].toString().indexOf("is-class-reference")!==-1){var i=Object.create(e["extends"].prototype);n=e["extends"].apply(i,arguments)}else{var i=Object.create(e["extends"].prototype);e["extends"].apply(i,arguments);n=i}}var s={};if(e.uses!==undefined){var o=typeof e.uses==="object"?e.uses:[e.uses];for(var u in o){if(typeof o[u]==="string"){var r=o[u];o[u]=__joii__.aliases[r];if(typeof o[u]==="undefined"){throw'Alias "'+r+'" does not exist.'}}for(var a in o[u]){if(typeof o[u][a]==="function"){s[a]=o[u][a]}}}}var f=["implements","__interfaces__"];var l=[];if(e.implements!==undefined){var c=typeof e.implements==="object"?e.implements:[e.implements];for(var h in c){if(typeof c[h]==="string"){var r=c[h];c[h]=__joii__.aliases[r];if(typeof c[h]==="undefined"){throw'Alias "'+r+'" does not exist.'}}if(typeof c[h]==="object"){l.push(c[h])}else if(typeof c[h]==="function"){var i=Object.create(c[h].prototype);var p=c[h].apply(i,arguments);var d={};for(var a in p){if(f.indexOf(a)!==-1){continue}d[a]=p[a]}l.push(d)}else{throw"Unknown interface type: "+typeof c[h]}}}var v;if(typeof t==="function"){v=Object.create(t.prototype)}else{v=t}for(var a in s){if(v[a]===undefined){v[a]=s[a]}}if(typeof t==="function"){t.apply(v,arguments)}for(var a in v){if(!v.hasOwnProperty(a)){continue}n.parent=n.parent||{};n.parent[a]=n[a]||v[a];n[a]=v[a];if(a==="name"){console.warn("A property 'name' is ignored since its a reserved name by Prototype. See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name. Your value has been stored in this._name instead.");n._name=v[a]}}var a,m;n.__interfaces__=n.__interfaces__||[];for(var a in l){n.__interfaces__.push(l[a])}for(a in l){for(m in l[a]){if(typeof n[m]!==l[a][m]){throw"Missing "+l[a][m]+" implementation: "+m}}}for(var a in __joii__.proto){n[a]=__joii__.proto[a]}if(typeof v.__destruct==="function"){window.addEventListener("beforeunload",function(e){return v.__destruct.call(n,e)})}if(typeof v.__unload==="function"){window.addEventListener("unload",function(e){return v.__unload.call(n,e)})}if(typeof v.__construct==="function"){v.__construct.apply(n,arguments)}for(var a in n){if(n.hasOwnProperty(a)){if(a.charAt(0)==="_"){delete n[a]}}}return n};if(typeof e.name==="string"){__joii__.aliases[e.name]=n}return n}if(Object.create===undefined){Object.create=function(e){function t(){}t.prototype=e;return new t}}__joii__={aliases:{},proto:{"implements":function(e){var t=[];if(typeof e==="string"){var n=e;e=__joii__.aliases[n];if(typeof e==="undefined"){throw'Alias "'+n+'" does not exist.'}}for(var r in e){t.push(typeof e[r]+":"+r)}t=JSON.stringify(t);for(var e in this.__interfaces__){var i=[];for(var r in this.__interfaces__[e]){i.push(typeof this.__interfaces__[e][r]+":"+r)}i=JSON.stringify(i);if(t===i){return true}}return false},mixin:function(e,t){t=t||false;if(typeof e==="function"){var n=e;e=Object.create(n.prototype,this);e=n.apply(this,[])}for(var r in e){if(this[r]!==undefined&&t===true||this[r]===undefined){this[r]=e[r]}}}}};Interface=function(e,t){if(t===undefined&&(typeof e==="function"||typeof e==="object")){t=e;e={}}var n={},r,i,s;if(typeof e["extends"]==="string"){var o=e["extends"];e["extends"]=__joii__.aliases[o];if(typeof e["extends"]==="undefined"){throw'Alias "'+o+'" does not exist.'}}if(typeof e["extends"]==="function"){r=Object.create(e["extends"].prototype);i=e["extends"].apply(r);for(s in r){n[s]=r[s]}}if(typeof e["extends"]==="object"){n=JSON.parse(JSON.stringify(e["extends"]))}if(typeof t==="function"){r=Object.create(t.prototype);i=t.apply(r);for(s in r){n[s]=r[s]}}else{for(var s in t){n[s]=t[s]}}if(typeof e.name==="string"){__joii__.aliases[e.name]=n}return n}
