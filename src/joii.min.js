var _g=window||global;_g.$JOII={PublicAPI:{Class:function(e,t){if(typeof t==="undefined"){t=e;e={}}return new _g.$JOII.ClassBuilder(e,t)},Interface:function(e){var t=new Object;var n=_g.$JOII.System.guid()();for(var r in e){t[r]=e[r]}_g.$JOII.Compat.CreateProperty(t,"__interface__",n);_g.$JOII.Interfaces[n]=t;return t},RegisterJOIIPlugin:function(e,t){_g.$JOII.Plugins[e]={compile:t.compile||function(){},supports:t.supports||function(){return true},scope:t.scope||{}}}},PublicClassAPI:{"super":function(e,t){var n=Array.prototype.slice.call(arguments,1),r=this,i=this.__joii__,s=function(e,t,n){if(typeof e==="undefined"){throw new Error('Parent method "'+t+'" does not exist.')}if(typeof e.__joii__.parent!=="undefined"&&typeof e.__joii__.parent.prototype[t]==="undefined"){return s(e.__joii__.parent,t,n)}if(typeof e.__joii__.parent==="undefined"){throw new Error('Method "'+t+'" does not exist.')}var o=e.__joii__.parent.prototype[t];r.__joii__=e.__joii__.parent.prototype.__joii__;var u=o.apply(r,n);r.__joii__=i;return u};return s(this,e,n)},instanceOf:function(e){if(typeof e.__joii__!=="undefined"){e=e.__joii__.clean_prototype}if(typeof e.__interface__!=="undefined"){return _g.$JOII.Compat.indexOf(this.__joii__.interfaces,e.__interface__)!==-1}var t=function(e,n){var r=e;if(typeof e.__joii__!=="undefined"){e=e.__joii__.clean_prototype}if(e===n){return true}if(typeof r.__joii__!=="undefined"){if(typeof r.__joii__.parent!=="undefined"){return t(r.__joii__.parent,n)}}return r===n};return t(this,e)}},Plugins:{},Interfaces:{},ClassBuilder:function(e,t){if(typeof t!=="object"){throw new Error("Class body must be an Object, "+typeof t+"given")}var n=_g.$JOII.System.ApplyPrototype(function(){for(var e in this.__joii__.implementation_list){var t=this.__joii__.implementation_list[e];if(typeof this[e]!==t&&e.charAt(0)!=="_"&&e.charAt(1)!=="_"){if(typeof this[e]==="undefined"){throw new Error("Class is missing "+t+' implementation of property "'+e+'".')}else{throw new Error('Property "'+e+'" must be of type "'+t+'", '+typeof e+" detected.")}}}if(typeof this.__construct==="function"){this.__construct.apply(this,arguments)}},t);if(typeof e["extends"]==="function"&&typeof e["extends"].prototype==="object"){n=_g.$JOII.System.ApplyParent(n,e["extends"])}else if(typeof e["extends"]==="object"){n=_g.$JOII.System.ApplyTrait(n,e["extends"])}else if(typeof e["extends"]!=="undefined"){throw new Error("Parent class must be a function containing a prototype.")}for(var r in _g.$JOII.PublicClassAPI){if(typeof n.prototype.i!=="undefined"){throw new Error('Method "'+r+'" is reserved by JOII.')}_g.$JOII.Compat.CreateProperty(n.prototype,r,_g.$JOII.PublicClassAPI[r])}_g.$JOII.System.ApplyPlugins(n,t);if(typeof e["uses"]!=="undefined"){if(typeof e["uses"][0]==="undefined"){var r=e["uses"];e["uses"]=[r]}for(var r in e["uses"]){if(typeof e["uses"][r]==="object"){for(var i in e["uses"][r]){var s=e["uses"][r][i];if(typeof n.prototype[i]==="undefined"){n.prototype[i]=s}}}}}if(typeof e["implements"]!=="undefined"&&typeof e["implements"][0]==="undefined"){var r=e["implements"];e["implements"]=[];e["implements"].push(r)}e["implements"]=e["implements"]||[];n.__joii__["implements"]=e["implements"];n.__joii__["interfaces"]=[];_g.$JOII.System.ApplyInterfaces(n);n.__joii__.clean_prototype=t;_g.$JOII.Compat.CreateProperty(n.prototype,"__joii__",n.__joii__);var o=n;return o},System:{ApplyPrototype:function(e,t){_g.$JOII.Compat.CreateProperty(e,"__joii__",{});for(var n in t){e.prototype[n]=t[n]}return e},ApplyParent:function(e,t){e.__joii__.parent=new Object;e.__joii__.parent.prototype=t.prototype;if(typeof t.__joii__==="object"){e.__joii__.parent.__joii__=t.__joii__}for(var n in t.prototype){if(typeof e.prototype[n]==="undefined"){e.prototype[n]=t.prototype[n]}}return e},ApplyTrait:function(e,t){if(typeof Object.getOwnPropertyNames!=="undefined"){var n=Object.getOwnPropertyNames(t);for(var r in n){if(typeof e.prototype[n[r]]==="undefined"){e.prototype[n[r]]=Math[n[r]]}}}else{for(var i in t){if(typeof e.prototype[i]==="undefined"){e.prototype[i]=t[i]}}}return e},ApplyPlugins:function(e,t){for(var n in _g.$JOII.Plugins){if(!_g.$JOII.Plugins[n].supports(e)){continue}if(undefined!==(p=_g.$JOII.Plugins[n].compile(e))){e=p}for(var r in _g.$JOII.Plugins[n].scope){if(typeof e.prototype[r]!=="undefined"){if(typeof t[r]!=="undefined"){throw new Error('Method "'+r+'" is reserved by plugin "'+n+'".')}for(var i in _g.$JOII.Plugins){for(var s in _g.$JOII.Plugins[i].scope){if(s===r&&n!==i){throw new Error('Method "'+r+'" from plugin "'+n+'" is already in use by plugin "'+i+'".')}}}}e.prototype[r]=_g.$JOII.Plugins[n].scope[r]}}},ApplyInterfaces:function(e){var t=function(n,r){r=r||{};for(var i in n.__joii__["implements"]){e.__joii__["interfaces"].push(n.__joii__["implements"][i].__interface__);for(var s in n.__joii__["implements"][i]){r[s]=n.__joii__["implements"][i][s]}}if(typeof n.__joii__.parent!=="undefined"){var o=t(n.__joii__.parent,r);for(var i in o){r[i]=o[i]}}return r};e.__joii__.implementation_list=t(e)},guid:function(){function e(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}},Compat:{indexOf:function(e,t){for(var n in e){if(e[n]===t){return n}}return-1},CreateNamespaceObject:function(e,t){var n=window||global,r=e.split("."),i;while(r.length>0){i=r.shift();if(typeof n[i]==="undefined"){n[i]={}}if(typeof t!=="undefined"&&r.length===0){n[i]=t;return n}n=n[i]}return n},CreateProperty:function(e,t,n){try{if(typeof Object.defineProperty!=="undefined"){Object.defineProperty(e,t,{writable:true,enumerable:false,value:n})}else{e[t]=n}}catch(r){e[t]=n}}},initialize:function(){var e=document.getElementsByTagName("script"),t=e[e.length-1];if(!(ns=t.getAttribute("data-ns"))){ns=_g}if(typeof ns==="string"){ns=_g.$JOII.Compat.CreateNamespaceObject(ns)}for(var n in _g.$JOII.PublicAPI){if(_g.$JOII.PublicAPI.hasOwnProperty(n)){ns[n]=_g.$JOII.PublicAPI[n]}}}};_g.$JOII.initialize()