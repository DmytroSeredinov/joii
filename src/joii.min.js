/**
 * (JOII) Javascript Object Inheritance Implementation
 *
 * @author Harold Iedema <harold@iedema.me>
 */
function Class(e,t){if(t===undefined&&typeof e==="function"){t=e;e={}}return function(){var n=function(){this.parent={}};if(typeof e.extends==="function"){if(e.extends.toString().indexOf("is-class-reference")!==-1){var r=Object.create(e.extends.prototype);n=e.extends.apply(r,arguments)}else{var r=Object.create(e.extends.prototype);e.extends.apply(r,arguments);n=r}}var i={};if(e.uses!==undefined){var s=typeof e.uses==="object"?e.uses:[e.uses];for(var o in s){for(var u in s[o]){if(typeof s[o][u]==="function"){i[u]=s[o][u]}}}}var a=["implements","__interfaces__"];var f=[];if(e.implements!==undefined){var l=typeof e.implements==="object"?e.implements:[e.implements];for(var c in l){if(typeof l[c]==="object"){f.push(l[c])}else if(typeof l[c]==="function"){var r=Object.create(l[c].prototype);n=l[c].apply(r,arguments);var h={};for(var u in n){if(a.indexOf(u)!==-1){continue}h[u]=n[u]}f.push(h)}else{throw"Unknown interface type: "+typeof l[c]}}}var p=Object.create(t.prototype);for(var u in i){if(p[u]===undefined){p[u]=i[u]}}var d=t.apply(p,arguments);for(var u in p){if(n[u]!==undefined){n.parent=n.parent||{};n.parent[u]=n[u]}n[u]=p[u]}var u,v;n.__interfaces__=n.__interfaces__||[];for(var u in f){n.__interfaces__.push(f[u])}for(u in f){for(v in f[u]){if(typeof n[v]!==f[u][v]){throw"Missing "+f[u][v]+" implementation: "+v}}}n.implements=function(e){var t=[];for(var n in e){t.push(typeof e[n]+":"+n)}t=JSON.stringify(t);for(var e in this.__interfaces__){var r=[];for(var n in this.__interfaces__[e]){r.push(typeof this.__interfaces__[e][n]+":"+n)}r=JSON.stringify(r);if(t===r){return true}}return false};if(typeof p.__destruct==="function"){window.addEventListener("beforeunload",function(e){return p.__destruct.call(n,e)})}if(typeof p.__unload==="function"){window.addEventListener("unload",function(e){return p.__unload.call(n,e)})}if(typeof p.__construct==="function"){p.__construct.apply(n,arguments)}return n}}Interface=function(e,t){if(t===undefined&&typeof e==="function"){t=e;e={}}var n={},r,i,s;if(typeof e.extends==="function"){r=Object.create(e.extends.prototype);i=e.extends.apply(r);for(s in r){n[s]=r[s]}}if(typeof e.extends==="object"){n=e.extends}if(typeof t==="function"){r=Object.create(t.prototype);i=t.apply(r);for(s in r){n[s]=r[s]}}else{for(var s in t){n[s]=t[s]}}return n}
