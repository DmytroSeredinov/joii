/**
 * (JOII) Javascript Object Inheritance Implementation
 *
 * @author Harold Iedema <harold@iedema.me>
 */
function Class(e,t){void 0===t&&"function"==typeof e&&(t=e,e={});var n=function(){var n=function(){};if("string"==typeof e["extends"]){var i=e["extends"];if(e["extends"]=__joii__.aliases[i],"undefined"==typeof e["extends"])throw'Alias "'+i+'" does not exist.'}if("function"==typeof e["extends"])if(-1!==e["extends"].toString().indexOf("is-class-reference")){var o=Object.create(e["extends"].prototype);n=e["extends"].apply(o,arguments)}else{var o=Object.create(e["extends"].prototype);e["extends"].apply(o,arguments),n=o}var r={};if(void 0!==e.uses){var s="object"==typeof e.uses?e.uses:[e.uses];for(var a in s){if("string"==typeof s[a]){var i=s[a];if(s[a]=__joii__.aliases[i],"undefined"==typeof s[a])throw'Alias "'+i+'" does not exist.'}for(var f in s[a])"function"==typeof s[a][f]&&(r[f]=s[a][f])}}var p=["implements","__interfaces__"],_=[];if(void 0!==e.implements){var c="object"==typeof e.implements?e.implements:[e.implements];for(var d in c){if("string"==typeof c[d]){var i=c[d];if(c[d]=__joii__.aliases[i],"undefined"==typeof c[d])throw'Alias "'+i+'" does not exist.'}if("object"==typeof c[d])_.push(c[d]);else{if("function"!=typeof c[d])throw"Unknown interface type: "+typeof c[d];var o=Object.create(c[d].prototype),u=c[d].apply(o,arguments),y={};for(var f in u)-1===p.indexOf(f)&&(y[f]=u[f]);_.push(y)}}}var l=Object.create(t.prototype);for(var f in r)void 0===l[f]&&(l[f]=r[f]);t.apply(l,arguments);for(var f in l)void 0!==n[f]&&(n.parent=n.parent||{},n.parent[f]=n[f]),n[f]=l[f],"name"===f&&(console.warn("A property 'name' is ignored since its a reserved name by Prototype. See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name. Your value has been stored in this._name instead."),n._name=l[f]);var f,v;n.__interfaces__=n.__interfaces__||[];for(var f in _)n.__interfaces__.push(_[f]);for(f in _)for(v in _[f])if(typeof n[v]!==_[f][v])throw"Missing "+_[f][v]+" implementation: "+v;return n.implements=function(e){var t=[];if("string"==typeof e){var n=e;if(e=__joii__.aliases[n],"undefined"==typeof e)throw'Alias "'+n+'" does not exist.'}for(var i in e)t.push(typeof e[i]+":"+i);t=JSON.stringify(t);for(var e in this.__interfaces__){var o=[];for(var i in this.__interfaces__[e])o.push(typeof this.__interfaces__[e][i]+":"+i);if(o=JSON.stringify(o),t===o)return!0}return!1},"function"==typeof l.__destruct&&window.addEventListener("beforeunload",function(e){return l.__destruct.call(n,e)}),"function"==typeof l.__unload&&window.addEventListener("unload",function(e){return l.__unload.call(n,e)}),"function"==typeof l.__construct&&l.__construct.apply(n,arguments),n};return"string"==typeof e.name&&(__joii__.aliases[e.name]=n),n}__joii__={aliases:{}},void 0===Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),Interface=function(e,t){void 0===t&&"function"==typeof e&&(t=e,e={});var n,i,o,r={};if("string"==typeof e["extends"]){var s=e["extends"];if(e["extends"]=__joii__.aliases[s],"undefined"==typeof e["extends"])throw'Alias "'+s+'" does not exist.'}if("function"==typeof e["extends"]){n=Object.create(e["extends"].prototype),i=e["extends"].apply(n);for(o in n)r[o]=n[o]}if("object"==typeof e["extends"]&&(r=e["extends"]),"function"==typeof t){n=Object.create(t.prototype),i=t.apply(n);for(o in n)r[o]=n[o]}else for(var o in t)r[o]=t[o];return"string"==typeof e.name&&(console.debug("Registered alias: "+e.name),__joii__.aliases[e.name]=r),r};
